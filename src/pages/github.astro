---
import WorkshopLayout from "../layouts/WorkshopLayout.astro";
import SystemMessage from "../components/SystemMessage.astro";
import StepTasks from "../components/StepTasks.astro";
import content from "../content/steps/02-github-basics.ts";
---

<WorkshopLayout title="GitHub basics" description="Get access to GitHub and learn the basics. Completion unlocks LOCALHOST.">
  <article class="module-page github-module">
    <header class="module-header">
      <h1>GitHub Basics</h1>
      <dl class="module-meta" aria-label="Module info">
        <dt>Module</dt>
        <dd>GITHUB</dd>
        <dt>Access Requirement</dt>
        <dd>Observer</dd>
        <dt>Completion Unlocks</dt>
        <dd>Localhost</dd>
      </dl>
    </header>

    <p class="step-intent" aria-label="Mission">
      <em>Your mission:</em><br />
      <em>Get access to GitHub and familiarize yourself with GitHub basics.</em>
    </p>

    <SystemMessage message={content.systemMessage} typed={true} />

    <section class="step-card" aria-labelledby="shared-workspaces">
      <h2 id="shared-workspaces">GitHub: Shared Workspaces</h2>
      <p>GitHub is where teams store, review, and collaborate on code.</p>
      <p>For designers, it helps to think of GitHub as:</p>
      <ul>
        <li>A shared project folder</li>
        <li>With a complete history of changes</li>
        <li>And a structured way to propose updates safely</li>
      </ul>
      <p>You do not need to memorize commands.</p>
      <p>You do need to understand how changes move through the system.</p>
    </section>

    <section class="step-card" aria-labelledby="getting-access">
      <h2 id="getting-access">Getting Access at WEX</h2>
      <p>GitHub access at WEX is managed through enterprise accounts and teams.</p>

      <h3>Step 1: Request Access to the GitHub EMU</h3>
      <p>To get started, submit a ticket to request access to the GitHub Enterprise Managed User (EMU):</p>
      <p>
        <a href="https://wexinc.atlassian.net/servicedesk/customer/portal/1016/create/1195" target="_blank" rel="noopener noreferrer">
          wexinc.atlassian.net/servicedesk/customer/portal/1016/create/1195
        </a>
      </p>
      <p>When submitting the ticket:</p>
      <ul>
        <li>Select <strong>“Add a new user”</strong></li>
        <li>Follow the instructions provided in the form</li>
      </ul>
      <p>Once approved, you’ll be able to sign in to GitHub using your WEX-managed account.</p>

      <h3>Step 2: Team Setup (Design Teams)</h3>
      <p>GitHub access is organized by teams.</p>
      <p>For design teams:</p>
      <ul>
        <li>A new <strong>enterprise team</strong> must be created</li>
        <li>Additional tickets are required to add members to each team</li>
      </ul>
      <p>This ensures:</p>
      <ul>
        <li>Correct access to repositories</li>
        <li>Clear ownership</li>
        <li>Safer collaboration across groups</li>
      </ul>
      <p>If you’re unsure which team you should belong to, check with your design lead.</p>
    </section>

    <section class="step-card" aria-labelledby="core-concepts">
      <h2 id="core-concepts">Core Concepts (Expanded)</h2>
      <p>These concepts will come up often. Understanding them now will make everything else easier.</p>

      <h3>Repository</h3>
      <p>A repository is the project itself.</p>
      <p>It contains:</p>
      <ul>
        <li>All files and folders</li>
        <li>A full history of changes</li>
        <li>Configuration for things like deployment and permissions</li>
      </ul>

      <h3>Main Branch</h3>
      <p>The <strong>main</strong> branch is the primary, trusted version of the project.</p>
      <p>Think of it as:</p>
      <ul>
        <li>The current source of truth</li>
        <li>The version others build from</li>
        <li>The branch protected from direct changes</li>
      </ul>
      <p>You generally do <strong>not</strong> edit <code>main</code> directly.</p>
      <p>Instead, changes are made in branches and merged back through pull requests.</p>

      <h3>Branch</h3>
      <p>A branch is a safe workspace.</p>
      <p>Branches let you:</p>
      <ul>
        <li>Make changes without affecting the main branch</li>
        <li>Experiment freely</li>
        <li>Propose updates for review</li>
      </ul>
      <p>Branches are temporary by design.</p>

      <h3>Commit</h3>
      <p>A commit is a saved change.</p>
      <p>Each commit:</p>
      <ul>
        <li>Captures what changed at that moment</li>
        <li>Includes a short message explaining why</li>
      </ul>
      <p>Small, clear commits are encouraged.</p>

      <h3>Pull Request</h3>
      <p>A pull request (PR) asks to merge changes into the main branch.</p>
      <p>PRs are how teams:</p>
      <ul>
        <li>Review work</li>
        <li>Discuss decisions</li>
        <li>Approve updates</li>
      </ul>
      <p>Opening a PR does not mean your change is final.</p>
      <p>It means it’s ready for review.</p>
    </section>

    <section class="step-card" aria-labelledby="github-pages">
      <h2 id="github-pages">GitHub Pages (Why This App Has a Public URL)</h2>
      <p>GitHub can host static sites using <strong>GitHub Pages</strong>.</p>
      <p>This allows a repository to:</p>
      <ul>
        <li>Publish a site automatically</li>
        <li>Provide a public URL</li>
        <li>Share documentation, demos, or tools</li>
      </ul>
      <p>This workshop app is hosted using GitHub Pages.</p>
      <p>Later, you’ll run the same app locally on your machine.</p>
    </section>

    <section class="step-card" aria-labelledby="ssh">
      <h2 id="ssh">Connecting Cursor to GitHub (SSH)</h2>
      <p>To work smoothly with GitHub, Cursor needs a secure way to authenticate.</p>
      <p>This is done using an <strong>SSH key</strong>.</p>

      <h3>What an SSH Key Is</h3>
      <p>An SSH key is a secure identifier stored on your machine.</p>
      <p>It allows Cursor to:</p>
      <ul>
        <li>Connect to GitHub without repeated passwords</li>
        <li>Push and pull changes safely</li>
        <li>Identify you as an authorized user</li>
      </ul>

      <h3>Setting Up an SSH Key in Cursor</h3>
      <ol>
        <li>Open Cursor</li>
        <li>Open the Command Palette</li>
        <li>Search for <strong>“SSH”</strong> or <strong>“Git: Generate SSH Key”</strong></li>
        <li>Follow the prompts to generate a new key</li>
        <li>Add the generated public key to your GitHub account</li>
      </ol>
      <p>GitHub provides instructions during this step.</p>

      <h3>Checking That It Works</h3>
      <p>To confirm your SSH connection:</p>
      <ul>
        <li>Try cloning a repository using the <strong>SSH URL</strong></li>
        <li>Or run a test connection from the terminal if prompted</li>
      </ul>
      <p>If the connection works, no further action is needed.</p>

      <h3>Why This Matters</h3>
      <p>Without SSH configured:</p>
      <ul>
        <li>You may be repeatedly asked to authenticate</li>
        <li>Some Git operations may fail</li>
        <li>Collaboration becomes more frustrating than it needs to be</li>
      </ul>
      <p>Once set up, SSH mostly disappears into the background.</p>
      <p>That’s the goal.</p>
    </section>

    <section class="step-card" aria-labelledby="not-expected">
      <h2 id="not-expected">What You’re Not Expected to Do Yet</h2>
      <p>You are not required to:</p>
      <ul>
        <li>Memorize Git commands</li>
        <li>Resolve complex merge conflicts</li>
        <li>Understand every configuration file</li>
      </ul>
      <p>Those skills come with use, not onboarding.</p>
    </section>

    <section class="step-card" aria-labelledby="complete-module">
      <h2 id="complete-module">Complete This Module</h2>
      <p>Once you:</p>
      <ul>
        <li>Understand GitHub’s role</li>
        <li>Know how access works at WEX</li>
        <li>Have a path to authenticate securely</li>
      </ul>
      <p>You’re ready to move on.</p>
      <p>The next module will guide you through running this project locally.</p>
    </section>

    <StepTasks moduleId="github-basics" tasks={content.tasks} />

    <section id="github-mark-complete" class="welcome-mark-complete module-mark-complete" aria-label="Mark module complete">
      <p id="github-mark-complete-confirm" class="system-message welcome-mark-complete-msg" role="status" aria-live="polite" hidden>
        GitHub basics marked complete. Next module available: LOCALHOST.
      </p>
      <div id="github-mark-complete-actions">
        <button type="button" id="github-mark-complete-btn" class="workshop-btn workshop-btn--primary">
          Mark GitHub basics complete
        </button>
        <a id="github-back-to-desktop" href="/cursor-workshop/" class="workshop-btn workshop-btn--secondary" aria-label="Back to Desktop" hidden>
          Back to Desktop
        </a>
      </div>
    </section>

    <p class="module-next-hint">
      <em>On completion:</em> Module complete. Access level unchanged. Next module available: LOCALHOST.
    </p>
  </article>
</WorkshopLayout>

<script>
  import { markModuleComplete, isModuleComplete } from "../lib/progress";

  const btn = document.getElementById("github-mark-complete-btn");
  const confirmEl = document.getElementById("github-mark-complete-confirm");
  const backLink = document.getElementById("github-back-to-desktop");

  function showConfirmation() {
    if (confirmEl) {
      confirmEl.hidden = false;
      confirmEl.setAttribute("aria-live", "polite");
    }
    if (backLink) backLink.hidden = false;
    if (btn) btn.hidden = true;
  }

  if (isModuleComplete("github-basics")) {
    showConfirmation();
  } else if (btn) {
    btn.addEventListener("click", () => {
      markModuleComplete("github-basics");
      window.dispatchEvent(new CustomEvent("workshop-progress-update"));
      showConfirmation();
    });
  }
</script>
