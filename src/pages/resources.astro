---
import MatrixModuleLayout from "../layouts/MatrixModuleLayout.astro";
import SystemMessage from "../components/SystemMessage.astro";
import CollapsibleSection from "../components/CollapsibleSection.astro";
import ModuleGoalPanel from "../components/ModuleGoalPanel.astro";
import resourceGroups, { resourcesGoal, resourcesEstimatedTime } from "../content/steps/07-resources.ts";
---

<MatrixModuleLayout title="Resources" description="Reference materials for Cursor, GitHub, and local development. Access: Any.">
  <article class="module-page resources-module">
    <header class="module-header">
      <h1>Resources</h1>
    </header>

    <ModuleGoalPanel goal={resourcesGoal} estimatedTime={resourcesEstimatedTime} mission="Reference materials loaded." />

    <SystemMessage message="Reference materials loaded." typed={true} />

    <section class="step-card" aria-labelledby="resources-intro">
      <h2 id="resources-intro">Resources</h2>
      <p>This section contains reference materials you may find useful over time.</p>
      <p>Nothing here is required to complete the Cursor Access Program.</p>
      <p>Everything here is optional.</p>
      <p>Use these resources when you need clarification, context, or a reminder.</p>
    </section>

    {resourceGroups.map((group) => {
      const id = group.heading.toLowerCase().replace(/\s+/g, "-");
      return (
        <CollapsibleSection id={id} title={group.heading} stepCard={true}>
          <h2 id={id}>{group.heading}</h2>
          <ul class="resource-list">
            {group.links.map((link) => (
              <li class="resource-item">
                <a href={link.url} target="_blank" rel="noopener noreferrer" class="resource-link">
                  {link.title}
                </a>
                <span class="resource-url text-muted">{link.url}</span>
                {link.description && (
                  <p class="resource-desc text-muted">{link.description}</p>
                )}
              </li>
            ))}
          </ul>
        </CollapsibleSection>
      );
    })}

    <CollapsibleSection id="when-to-use" title="When to Use These" stepCard={true}>
      <h2 id="when-to-use">When to Use These</h2>
      <p>You might return here if:</p>
      <ul>
        <li>A Git concept feels unclear</li>
        <li>A command behaves unexpectedly</li>
        <li>You want to explore beyond the basics</li>
        <li>You need a refresher after time away</li>
      </ul>
      <p>There is no expectation to read everything.</p>
    </CollapsibleSection>

    <CollapsibleSection id="reminder" title="A Reminder" stepCard={true}>
      <h2 id="reminder">A Reminder</h2>
      <p>You do not need to become an expert.</p>
      <p>You only need to know where to look.</p>
    </CollapsibleSection>

    <CollapsibleSection id="system-notes" title="System Notes" stepCard={true}>
      <h2 id="system-notes">System Notes</h2>
      <ul>
        <li>Reference materials remain available</li>
        <li>The program does not expire</li>
        <li>Familiarity grows through use</li>
      </ul>
    </CollapsibleSection>

    <p class="module-next-hint">
      <em>End of module.</em>
    </p>
  </article>
</MatrixModuleLayout>
