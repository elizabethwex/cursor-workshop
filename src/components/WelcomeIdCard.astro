---
---
<section
  id="welcome-id-card"
  class="max-w-2xl mx-auto px-4 pt-8 pb-4"
  aria-label="Welcome identification"
>
  <div
    class="border border-[#00FF41] bg-black/90 shadow-[0_0_20px_rgba(0,255,65,0.1)] rounded-sm overflow-hidden"
  >
    <div class="bg-[#003B00]/30 border-b border-[#00FF41] px-4 py-2">
      <span class="text-xs uppercase tracking-widest font-terminal text-[#008F11]">SYSTEM ACCESS — IDENTIFICATION</span>
    </div>
    <div class="p-6 flex flex-col sm:flex-row gap-6 items-center sm:items-start">
      <div
        id="welcome-id-card-photo"
        class="flex-shrink-0 w-20 h-20 rounded border-2 border-[#003B00] bg-[#003B00]/50 flex items-center justify-center text-3xl font-bold text-[#00FF41]"
        aria-hidden="true"
      >
        <span id="welcome-id-card-initial">—</span>
      </div>
      <div class="flex-grow min-w-0">
        <p id="welcome-id-card-message" class="text-xl sm:text-2xl font-bold text-[#00FF41] font-terminal mb-2">
          Welcome to the matrix!
        </p>
        <p id="welcome-id-card-details" class="text-sm text-[#008F11] font-terminal">
          <span id="welcome-id-card-team-role">—</span>
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  import { getCurrentAgent } from "../lib/agents";

  function init() {
    const agent = getCurrentAgent();
    const messageEl = document.getElementById("welcome-id-card-message");
    const detailsEl = document.getElementById("welcome-id-card-team-role");
    const initialEl = document.getElementById("welcome-id-card-initial");

    if (!messageEl) return;

    if (agent) {
      const name = agent.name.trim() || "Agent";
      messageEl.textContent = `Welcome to the matrix ${name}!`;
      if (detailsEl) {
        const parts = [agent.team, agent.role].filter(Boolean).map((s) => s.trim()).filter(Boolean);
        detailsEl.textContent = parts.length > 0 ? parts.join(" · ") : "—";
      }
      if (initialEl) {
        initialEl.textContent = name.charAt(0).toUpperCase();
      }
    } else {
      messageEl.textContent = "Welcome to the matrix!";
      if (detailsEl) detailsEl.textContent = "—";
      if (initialEl) initialEl.textContent = "?";
    }
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }
</script>
