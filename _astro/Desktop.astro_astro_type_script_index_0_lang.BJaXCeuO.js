import{g as l}from"./progress.buUyn3MF.js";import{M as m}from"./modules.BzR7gP9c.js";function p(t,e){return t.isComplete(e)?"complete":t.unlocksWhen(e)?"available":"locked"}const o=document.getElementById("desktop-icons"),r=document.getElementById("desktop-locked-message");if(!o)throw new Error("Desktop icons container not found");function u(){const t=l();o.querySelectorAll(".desktop-icon[data-module-id]").forEach((e,i)=>{const s=e,a=m[i];if(!a)return;const n=p(a,t);s.setAttribute("data-status",n),a.id==="welcome"&&n==="available"?(s.setAttribute("data-start-here","true"),s.setAttribute("aria-description","Start here")):(s.removeAttribute("data-start-here"),s.removeAttribute("aria-description"))})}u();o.addEventListener("click",t=>{const e=t.target.closest("a.desktop-icon");if(!e)return;const i=e.getAttribute("data-status");if(i==="locked"){t.preventDefault(),r&&(r.classList.add("desktop-locked-message--visible"),r.setAttribute("aria-hidden","false"),window.setTimeout(()=>{r.classList.remove("desktop-locked-message--visible"),r.setAttribute("aria-hidden","true")},4e3));return}if(i==="available"||i==="complete"){const s=e.getAttribute("data-module-id"),a=e.getAttribute("data-route"),n=e.getAttribute("data-title")??"Module";s&&a&&(t.preventDefault(),window.dispatchEvent(new CustomEvent("workshop-show-app-boot",{detail:{moduleId:s,route:a,title:n}})))}});document.addEventListener("workshop-progress-update",()=>{u()});const c=document.getElementById("desktop-details-title");function d(t){c&&(c.textContent=t)}o.addEventListener("mouseover",t=>{const e=t.target.closest("a.desktop-icon");d(e&&e.getAttribute("data-title")||"")});o.addEventListener("mouseout",t=>{t.relatedTarget&&t.relatedTarget.closest?.("a.desktop-icon")||d("")});o.addEventListener("focusin",t=>{const e=t.target.closest("a.desktop-icon");e&&d(e.getAttribute("data-title")||"")});o.addEventListener("focusout",()=>{window.setTimeout(()=>{o.querySelector(".desktop-icon:focus")||d("")},0)});
